---
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const latestPost = posts[0];
---

{
  latestPost && (
    <section class="p-0 md:p-20 bg-primary-500 text-secondary-400" id="news">
      <div class="container mx-auto">
        <div
          class="grid grid-cols-1 w-full md:w-2/3 mx-auto"
          data-aos="fade-up">
          <h2 class="hidden md:block text-3xl md:text-5xl text-start md:mb-12 mx-3 md:mx-0 text-secondary-400">
            Latest News
          </h2>

          <div class="mx-auto">
            <article class="bg-secondary-300  overflow-hidden">
              {latestPost.data.image && (
                <div class="aspect-video overflow-hidden">
                  <img
                    src={latestPost.data.image}
                    alt={latestPost.data.title}
                    class="w-full h-full object-cover"
                  />
                </div>
              )}
              <div class="p-4 md:p-8">
                <div class="flex justify-between items-start mb-4">
                  <h3 class="text-2xl md:text-3xl font-semibold text-primary-500 leading-tight">
                    <a
                      href={`/news/${latestPost.slug}`}
                      class="hover:text-primary-400 transition-colors duration-200">
                      {latestPost.data.title}
                    </a>
                  </h3>
                  <time
                    datetime={latestPost.data.pubDate.toISOString()}
                    class="text-grey-500 text-sm whitespace-nowrap ml-4">
                    {latestPost.data.pubDate.toLocaleDateString("en-EN", {
                      year: "numeric",
                      month: "short",
                      day: "numeric",
                    })}
                  </time>
                </div>

                <p class="text-grey-700 text-lg leading-relaxed mb-6">
                  {latestPost.data.description}
                </p>

                <div class="flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center">
                  <a
                    href={`/news/${latestPost.slug}`}
                    class="bg-primary-500 hover:bg-primary-400 text-secondary-50 font-bold py-2 px-4 rounded transition-colors duration-200 inline-block hover:no-underline">
                    read the post
                  </a>

                  {/* <a
                  href="/news"
                  class="text-primary-500 hover:text-primary-400 transition-colors duration-200 font-medium">
                  Show all â†’
                </a> */}
                </div>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>
  )
}

<style>
  .main-section {
    min-height: 60vh;
  }
</style>
